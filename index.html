<!DOCTYPE html><html lang="zh-CN" theme="default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="XSUN"><title>XSUN's blog</title><meta name="description" content="A simple and beautiful blog"><meta name="keywords" content="Blog,博客,Hexo"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta id="site_data_static" data-url="/"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.webp"><link rel="stylesheet" href="/js_complied/bundle.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;display=swap" rel="stylesheet"><script src="/js_complied/bundle.js"></script><script>Anatolo.comment.setConfig({"valine":{"enable":false,"appid":null,"appkey":null,"notify":false,"verify":false,"avatar":"mm","placeholder":"hello, world"},"gitment":{"enable":false,"owner":"Your GitHub ID","repo":"Repo to store comments","client_id":"Your client ID","client_secret":"Your client secret"},"gitalk":{"enable":false,"owner":"Your GitHub ID","repo":"Repo to store comments","client_id":"Your client ID","client_secret":"Your client secret"},"duoshuo":null,"disqus":null,"gentie":null})</script><meta name="generator" content="Hexo 7.3.0"></head><body> <main-outlet><div class="page-top animated"><div class="nav"><li><a class="current" href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="nav_right_btn"><li class="btn-toggle-more"><i class="fa fa-ellipsis"></i></li><li class="btn-search"><a class="fa fa-search" onclick="Anatolo.search.openWindow();"></a></li><li class="btn-toggle-theme"><a class="far fa-sun" onclick="Anatolo.darkLightToggle();"></a></li></div><div class="avatar"><img src="/images/logo.webp"></div></div></div><div class="sidebar animated"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:220px;" alt="favicon"><h3 title=""><a href="/">XSUN's blog</a></h3><div class="description"><p>A simple and beautiful blog</p></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/Null-PE"><i class="fab fa-github"></i></a></li></ul></div></div><div class="footer"><div class="p"><span>Author </span><i class="fa fa-star"></i><span> XSUN</span></div><div class="by_farbox"><span>Powered by</span><a href="https://hexo.io/zh-cn/" target="_blank"> Hexo</a><span> &</span><a href="https://github.com/Lhcfl/hexo-theme-anatolo" target="_blank"> Anatolo</a></div><div class="beian"></div></div></div><div class="main animated fadeInDown"><div class="autopagerize_page_element"><div class="content"><div class="post animated"><div class="post-title"><h3><a href="/2025/02/01/hello-world/">Hello World</a></h3></div><div class="post-content"><div class="card"><p><p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2025-02-01</span><span>大约75个字, 15秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2022/02/06/2022-02-06-zip-pw/">Mac 生成带密码的zip文件</a></h3></div><div class="post-content"><div class="card"><p><ol>
<li><h1 id="create-a-folder"><a href="#create-a-folder" class="headerlink" title="create a folder"></a>create a folder</h1></li>
</ol>
<ul>
<li><code>cd folderPath</code></li>
<li><code>mkdir folderName</code></li>
</ul>
<ol start="2">
<li><h1 id="create-zip-file-and-set-password"><a href="#create-zip-file-and-set-password" class="headerlink" title="create zip file and set password"></a>create zip file and set password</h1></li>
</ol>
<ul>
<li><code>zip -er filename.zip folderPath</code></li>
<li>input&#x2F;confirm password</li>
</ul>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2022-02-06</span><span>大约23个字, 4秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2022/02/05/2022-02-05-yeild/">Python yeild</a></h3></div><div class="post-content"><div class="card"><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">myGenerator</span>(<span class="params"><span class="built_in">max</span></span>):</span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> myGenerator(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<p>带有yeild的函数就是generator。yeild每次被执行到，都会返回一个迭代值。下一次执行时从yeild所在的下一个语句继续执行。</p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2022-02-05</span><span>大约74个字, 14秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/11/17/2021-11-17-vue-step1/">CLIでVue.jsを作る</a></h3></div><div class="post-content"><div class="card"><p><p>事前準備として、<a target="_blank" rel="noopener" href="https://nodejs.org/en/">nodeを</a>インストールする。</p>
<p>以下のコマンドを使って、バージョン確認する。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<p>バージョン古いときは以下のコマンドで更新できる。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -g install npm</span><br></pre></td></tr></table></figure>

<p>次のステップは<code>vue-vli</code>のインストール。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.x バージョンのvueは　<code>npm install -g vue-cli</code>でインストールする</p>
</blockquote>
<p>次はプロジェクトの親フォルダーへ移動して、プロジェクトを作る。</p>
<p>Webページのプロジェクトを作るため、以下のコマンドを実行する。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack myVueProject</span><br></pre></td></tr></table></figure>
<p>プロジェクト名などはディフォルで設定してくれるので、エンターキー連発でいい。<br><code>router</code> <code>test</code>などの機能も初期化したい場合は、該当の確認で <code>Y</code> を入力すればいい。</p>
<p>これで、Vue.jsのプロジェクト作成完了。</p>
<p>最後は <code>npm run build</code>でビルドして、 <code>npm run dev</code>でサーバーを起動すればいい。</p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-11-17</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Vue-js/" title="Vue.js">Vue.js </a><span>大约303个字, 1分钟0秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/11/12/2021-11-12-vue-project/">Vue.js プロジェクトの構造</a></h3></div><div class="post-content"><div class="card"><p><p>Vue.jsプロジェクトファイルの構造とVueファイルの構造をメモする。</p>
<h2 id="Vue-jsプロジェクトの構造"><a href="#Vue-jsプロジェクトの構造" class="headerlink" title="Vue.jsプロジェクトの構造"></a>Vue.jsプロジェクトの構造</h2><ul>
<li>src<ul>
<li>components: 各モジュールはここで定義する</li>
<li>main.js: 入り口のjs</li>
<li>router <ul>
<li>index.js: ルーター設定</li>
</ul>
</li>
<li>App.vue </li>
<li>assets: 画像などのリソース</li>
</ul>
</li>
<li>index.html: 画面入り口</li>
<li>static: 静的リソース</li>
<li>test</li>
<li>config<ul>
<li>index.js: 各種設定</li>
</ul>
</li>
<li>build</li>
<li>package.json</li>
<li>node_modules</li>
</ul>
<h2 id="Vueファイルの構造"><a href="#Vueファイルの構造" class="headerlink" title="Vueファイルの構造"></a>Vueファイルの構造</h2><p>Vueファイルは以下３つの部分がある。</p>
<p>[1]HTML</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">msg</span>=<span class="string">&quot;Welcome to Your Vue.js App&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>[2]JavaScript</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HelloWorld.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">HelloWorld</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>[3]css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-11-12</span><span>大约236个字, 47秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/10/20/2021-10-20-parameterizedtest/">JUnit5から使える @ParameterizedTest</a></h3></div><div class="post-content"><div class="card"><p><p><code>@ParameterizedTest</code>は指定のテストメソッドに違う引数を順番に渡して処理することで、複数のテストを実現する方法。<br>JUnit5の新しい機能として、使うとき以下のパッケージを依存関係に追加する必要がある。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.junit.jupiter:junit-jupiter-params</span><br></pre></td></tr></table></figure>

<h2 id="使ってみる"><a href="#使ってみる" class="headerlink" title="使ってみる"></a>使ってみる</h2><p><code>@ParameterizedTest</code>でパラメーター指定のテストケースを声明する。そして<code>@ValueSource</code>を利用してパラメーターを指定する（整数:1,2,3）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(ints = &#123;1, 2, 3&#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>これで１つのメソッドでテストを3回実行した。<br><code>@ParameterizedTest</code>は<code>org.junit.jupiter.params.provider</code>パッケージ下のインタフェースと一緒に使う必要がある。</p>
<h2 id="DisplayName-of-ParameterizedTest"><a href="#DisplayName-of-ParameterizedTest" class="headerlink" title="DisplayName of ParameterizedTest"></a>DisplayName of ParameterizedTest</h2><p><code>@ParameterizedTest</code>はパラメーターごとにテストケースを命名できる。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest(name = &quot;input is &#123;0&#125; &#123;1&#125; &#123;2&#125;&quot;)</span></span><br><span class="line"><span class="meta">@CsvSource(value = &#123;&quot;1,a,true&quot;&#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> a, String b, <span class="type">boolean</span> c)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使えるplaceholderは以下となる。</p>
<ul>
<li><code>&#123;index&#125;</code> テストケースの番号</li>
<li><code>&#123;0~n&#125;</code> 指定番号の引数の値（0から）</li>
<li><code>&#123;arguments&#125;</code> 全ても引数</li>
<li><code>&#123;displayName&#125;</code> <code>@DisplayName</code>で指定する内容、<code>@DisplayName</code>がない場合はテストメソッドの名前</li>
</ul>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-10-20</span><span>大约324个字, 1分钟4秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/08/04/2021-08-04-injectMocks/">InjectMocksのインジェクト方法</a></h3></div><div class="post-content"><div class="card"><p><p>テスト対象のインスタンスに <code>@InjectMocks</code>をつけると、対象インスタンスのフィルドに<code>@Mock</code>されたインスタンスを差し込むことができる。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@InjectMocks</span></span><br><span class="line">Manager manager;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mock</span></span><br><span class="line">Name name; <span class="comment">// manager.nameはモックされる</span></span><br></pre></td></tr></table></figure>

<h2 id="実現方法"><a href="#実現方法" class="headerlink" title="実現方法"></a>実現方法</h2><p><code>InjectMocks</code>のJavadocを読むと、フィルドのinject方法は3つあります。  </p>
<ol>
<li><p>Constructor injection;<br>1つ目はコンストラクターを利用してモックインスタンスを設定する。この方法はデフォルトで引数の数が一番多いコンストラクターを利用する。<br>要注意なことは、必要なモックインスタンスが見つからない場合、その引数は<code>null</code>となる。<br>引数にモックできないタイプ（基本型）がある場合、デフォルトのコンストラクターで<code>InjectMocks</code>のインスタンスを作って別の方法でInjectを実現する。</p>
</li>
<li><p>Property setter injection;<br>2つ目はとてもわかりやすくて、フィルドの<code>setter</code>メソッドを利用して、モックインスタンスを差し込む。<br>該当の<code>setter</code>メソッドを探すとき、まずフィルドのタイプを利用する。同じタイプのフィルドが存在する場合、モックインスタンスの名前を利用する。<br>という理由で、モックインスタンスを定義するとき、できる限り<code>Inject</code>対象のフィルドと同じ名前にする方がいい。<br><code>Constructor Injection</code>でデフォルトコンストラクターを利用する場合、モックインスタンスの差し込むはこの方法で実現される。</p>
</li>
<li><p>Field injection;<br>フィルドの<code>setter</code>がない場合、直接設定で<code>Inject</code>を実現する。ルールは<code>Property setter injection</code>と同じ。</p>
</li>
</ol>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-08-04</span><span>大约517个字, 1分钟43秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/07/21/2021-07-21-junit-1/">Mockito使い始めて見る</a></h3></div><div class="post-content"><div class="card"><p><p>Mockitoはクラスの偽のオブジェクトを作ってくれます。</p>
<p><code>when().thenReturn()</code>を利用して、<code>public</code>メソッドの戻る値を指定できます。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add_with_when</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;String&gt; mockedList = mock(List.class);</span><br><span class="line">    <span class="keyword">when</span>(mockedList.size()).thenReturn(<span class="number">10</span>);</span><br><span class="line">    assertThat(mockedList.size(), is(<span class="number">10</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ここは1つ注意しなければならないことがあります。モックで作成したオブジェクトの全てのメソッドが偽物になります。下記の<code>add()</code>はモックされたため、リストに追加する処理はありません。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add_without_when</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;String&gt; mockedList = mock(List.class);</span><br><span class="line">    mockedList.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">    mockedList.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">    mockedList.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">    assertThat(mockedList.size(), is(<span class="number">0</span>));    </span><br></pre></td></tr></table></figure>

<p><code>Answers.CALL_REAL_METHODS</code>を利用すれば、本物のメソッドを呼べます。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call_real_method</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> mock(Employee.class, Answers.CALLS_REAL_METHODS);</span><br><span class="line">    employee.setName(<span class="keyword">new</span> <span class="title class_">Name</span>(<span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">    assertThat(employee.getName(), is(<span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call_real_method_with_when</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> mock(Employee.class, Answers.CALLS_REAL_METHODS);</span><br><span class="line">    employee.setName(<span class="keyword">new</span> <span class="title class_">Name</span>(<span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">    <span class="keyword">when</span>(employee.getName()).thenReturn(<span class="keyword">new</span> <span class="title class_">Name</span>(<span class="string">&quot;Bob&quot;</span>));</span><br><span class="line">    assertThat(employee.getName(), is(<span class="string">&quot;Bob&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-07-21</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Mockito/" title="Mockito">Mockito </a><i class="fa fa-tag"></i><a class="tag" href="/tags/JUnit/" title="JUnit">JUnit </a><span>大约277个字, 55秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/04/22/2021-04-22-servlet-2-xml/">web.xml 的Servlet配置</a></h3></div><div class="post-content"><div class="card"><p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/AlanWilliamWalker/p/11128688.html">web.xml中servlet配置及其含义</a></p>
<h2 id="什么是-web-xml"><a href="#什么是-web-xml" class="headerlink" title="什么是 web.xml"></a>什么是 web.xml</h2><p>web.xml是Java工程中用来设置初始化配置信息的文件。xml的书写规则是有Schema文件来定义的。</p>
<p>web.xml使用的schema一般是Sun定义的，标注在标签<code>&lt;web-app&gt;</code>中。  </p>
<h2 id="web-xml中设置Servlet的常用标签"><a href="#web-xml中设置Servlet的常用标签" class="headerlink" title="web.xml中设置Servlet的常用标签"></a>web.xml中设置Servlet的常用标签</h2><h3 id="【1】servlet"><a href="#【1】servlet" class="headerlink" title="【1】servlet"></a>【1】servlet</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- servlet的配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 定义servlet的内部名称 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- servlet的类名 此处为全路径--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- servlet的映射配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 对应上面定义的servlet内部名称 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- servlet的映射路径 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span><span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-maping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置servlet标签需要配置两个，一个是servlet本身，另一个servlet-mapping是servlet的映射信息。<br>servlet的servlet-name可以自定义，一般为servlet的类名，而servlet-class则是servlet类的全路径。<br>servlet-mapping的servlet-name是对应的servlet名，url-pattern则是我们输入到浏览器地址栏中的用来调用servlet的url。</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th>url-pattern</th>
</tr>
</thead>
<tbody><tr>
<td align="left">精确匹配</td>
<td>&#x2F;servlet</td>
</tr>
<tr>
<td align="left">模糊匹配</td>
<td>&#x2F;*</td>
</tr>
<tr>
<td align="left">模糊匹配</td>
<td>&#x2F;path&#x2F;*</td>
</tr>
<tr>
<td align="left">模糊匹配</td>
<td>*.后缀</td>
</tr>
</tbody></table>
<p>url-pattern除了上面的基本写法之外，还要注意几点：</p>
<ol>
<li><code>/</code> 或者 <code>*</code>, url不能直接用servlet名开头。</li>
<li>同时使用两种模糊匹配是非法路径</li>
<li>匹配优先级：精确匹配最优先，后缀匹配最后</li>
</ol>
<h3 id="【2】初始参数"><a href="#【2】初始参数" class="headerlink" title="【2】初始参数"></a>【2】初始参数</h3><p>可以设置两种参数用来初始化servlet，一种是init-param，一种时context-param。<br>关于两种参数的区别：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/28392888/init-param-and-context-param">init-param and context-param</a>  </p>
<p>init-param是给特定servlet设置的参数，所以写在<code>&lt;servlet&gt;</code>下面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>userName<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用的时候通过<code>getServletConfig().getInitParamter(&quot;userName&quot;)</code>来调用。</p>
<p>context-param是为webApp全局准备的参数，直接定义在<code>&lt;web-app&gt;</code>标签下，通过<code>getServletContext().getInitParamter(&quot;userName&quot;)</code>来调用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>userName<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="【3】特殊标签"><a href="#【3】特殊标签" class="headerlink" title="【3】特殊标签"></a>【3】特殊标签</h3><ol>
<li>错误处理</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error404.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">exception-type</span>&gt;</span>java.lang.Exception<span class="tag">&lt;<span class="name">exception-type</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/exception.jsp<span class="tag">&lt;<span class="name">location</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<ol start="2">
<li>过滤器</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span> <span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span> <span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span> <span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span> <span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<ol start="3">
<li>监听器</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span><span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<ol start="4">
<li>会话</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span> </span><br><span class="line">  <span class="comment">&lt;!-- 以分为单位 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span> <span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>欢迎页</li>
</ol>
<p>找不到index1，就会加载index2</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index1.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index2.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-04-22</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Java/" title="Java">Java </a><span>大约792个字, 2分钟38秒读完</span></div></div></div></div><div class="post animated"><div class="post-title"><h3><a href="/2021/04/20/2021-04-20-servlet-1/">Servlet 基础</a></h3></div><div class="post-content"><div class="card"><p><p>内容总结自网络。</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>Servlet(Server Applet) 可以翻译为Java小服务程序或者服务连接器。是用Java编写的服务器端程序，具有独立于平台和协议的特性。主要的功能是交互式地浏览和生成数据，生成动态Web内容。</p>
<p>狭义的Servlet是指Java的一个接口，广义的Servlet是指任何实现了这个接口的类。从原理上讲Servlet可以响应任何类型的请求，但绝大多数情况侠Servlet只用来扩展基于HTTP协议的Web服务器。</p>
<h2 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h2><p>Servlet交互式地浏览和生成数据的过程为：</p>
<ol>
<li>客户端发送请求到服务器</li>
<li>服务器将请求信息发送至Servlet</li>
<li>Servlet生成响应内容并传给服务器。</li>
<li>服务器将响应返回客户端</li>
</ol>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><ol>
<li>客户端请求Servlet</li>
<li>加载Servlet到内存</li>
<li>生成Servlet实例，调用init()初始化</li>
<li>server调用service()方法，将一个请求对象和一个响应对象传递给service()</li>
<li>service()调用资源处理请求，使用响应对象的方法将响应传回server，再传回到客户端</li>
<li>(一般是server关闭时)调用destroy()方法</li>
</ol>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-04-20</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Java/" title="Java">Java </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Servlet/" title="Servlet">Servlet </a><span>大约326个字, 1分钟5秒读完</span></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/page/2/">下一页</a></li></ul></div></div></div></div></main-outlet><script>(async function(){ if (Anatolo.search == null) await Anatolo.getMsg("search-init"); Anatolo.search.config = {translation:{posts:"文章",pages:"页面",categories:"分类",tags:"标签",untitled:"(无标题)",} }; })()</script><div class="searchbox ins-search modal-cover"><div class="searchbox-container ins-search-container modal-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close"><a class="fa fa-times-circle" onclick="Anatolo.search.closeWindow();"></a></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"><p>Seraching...</p></div></div></div></div><button class="float-button hide" id="scroll-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" type="button" title="回到顶部"><i class="fa fa-angle-up"></i></button><div class="modal-cover" id="success-indicator"><div class="modal-container indicator"><i class="fa fa-check"></i></div></div></body></html>